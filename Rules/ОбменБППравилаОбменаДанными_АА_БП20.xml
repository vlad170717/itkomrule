<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>17c05c2b-9758-4d76-a06a-746c71b25c4e    </Ид>
	<Наименование>Автосалон5 --&gt; БухгалтерияПредприятия полная БП</Наименование>
	<ДатаВремяСоздания>2019-10-15T16:27:30</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="5.0.07.03" СинонимКонфигурации="Альфа-Авто: Автосалон+Автосервис+Автозапчасти ПРОФ. Редакция 5">Автосалон5</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.0.66.34" СинонимКонфигурации="Бухгалтерия предприятия, редакция 2.0">БухгалтерияПредприятия</Приемник>
	<ПослеЗагрузкиПравилОбмена>Параметры.КодГруппыПоставщиков = "000000001";
Параметры.КодГруппыПокупателей = "000000002";
Параметры.КодГруппыТоваров     = "00000000001";
Параметры.КодГруппыУслуг       = "00000000009";
Параметры.КодГруппыУСН         = "0000000001";
Параметры.кодОООАльфаМобил         = "ЦБ002555";
Параметры.кодСкладаКомиссия = "000000009";</ПослеЗагрузкиПравилОбмена>
	<Параметры>
		<Параметр Имя="КодГруппыПокупателей                              " Наименование="Код группы поставщиков" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыПоставщиков                              " Наименование="Код группы покупателей" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыТоваров                                  " Наименование="Код группы товаров" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыУслуг                                    " Наименование="Код группы услуг" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="КодГруппыУСН                                      " Наименование="Код группы УСН" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодОООАльфаМобил                                  " Наименование="кодОООАльфаМобил" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="кодСкладаКомиссия                                 " Наименование="кодСкладаКомиссия" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
	</Параметры>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>Если Не Объект.ЭтоГруппа Тогда
	Если Найти(Объект.Комментарий, "#УСН#") &gt; 0 Тогда
		ГруппаУСН = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУСН);
		Если Не ГруппаУСН.Пустая() И ГруппаУСН.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаУСН;
		КонецЕсли;
	Иначе
		ГруппаТоваров = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыТоваров);
		Если Не ГруппаТоваров.Пустая() И ГруппаТоваров.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаТоваров;
		КонецЕсли;
	КонецЕсли;		
	Объект.Комментарий  = СтрЗаменить(Объект.Комментарий, "#УСН#", "");
	Объект.Наименование = СокрЛП(Объект.Артикул) + ", " + СокрЛП(Объект.Наименование);
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>  //Артикул         = СокрЛП(СвойстваПоиска.Получить("Артикул"));
  Код         = СокрЛП(СвойстваПоиска.Получить("Код"));
	Наименование    = СокрЛП(СвойстваПоиска.Получить("Наименование"));	
	УСН             = СвойстваПоиска.Получить("");
	Услуга          = СвойстваПоиска.Получить("Услуга");
	Если НомерВариантаПоиска = 1 Тогда
		//СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", Артикул);
		СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоКоду(Код);
		//Если СсылкаНаОбъект.Пустая() Тогда
		//	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоНаименованию(Артикул + ", " + Наименование);
		//КонецЕсли;
		//Если СсылкаНаОбъект.Пустая() Тогда
		//	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоНаименованию(Артикул + " " + Наименование);
		//КонецЕсли;	
		Если СсылкаНаОбъект.Пустая() Тогда
			СсылкаНаОбъект = Неопределено;
		КонецЕсли;	
		СвойстваПоиска.Удалить("");
		ПрекратитьПоиск = Истина;
	КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БазоваяЕдиницаИзмерения --&gt; БазоваяЕдиницаИзмерения</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true" Поиск="true">
						<Код>3</Код>
						<Наименование>Артикул --&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.амбУСН Тогда
	Значение = Источник.Комментарий + "#УСН#";
Иначе	
	Значение = Источник.Комментарий;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>8</Код>
						<Наименование>Производитель --&gt; Производитель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Производитель" Вид="Реквизит" Тип="СправочникСсылка.Производители"/>
						<Приемник Имя="Производитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>НоменклатураПоКоду                                </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.амбУСН Тогда
	Значение = Параметры.КодГруппыУСН;
Иначе
	Значение = Параметры.КодГруппыТоваров;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="СправочникСсылка.СтавкиНДС"/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СтранаПроисхождения --&gt; СтранаПроисхождения</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>12</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>--&gt; Услуга</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Если Источник.ВидНоменклатуры = Перечисления.ВидыНоменклатуры.Услуга Тогда
	Значение = Истина;
Иначе
	Значение = Ложь;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>14</Код>
						<Наименование>амбУСН --&gt;</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="амбУСН" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>15</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>Справочник: Классификатор единиц измерения</Наименование>
				<Порядок>100</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Справочник: Классификатор стран мира</Наименование>
				<Порядок>150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>250</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты и контакты</Наименование>
				<Порядок>300</Порядок>
				<ПослеЗагрузки>Если Не Объект.ЭтоГруппа Тогда	
	Если Найти(Объект.Комментарий, "#Поставщик#") &gt; 0 Тогда
		ГруппаПоставщиков = Справочники.Контрагенты.НайтиПоКоду(Параметры.КодГруппыПоставщиков);
		Если Не ГруппаПоставщиков.Пустая() И ГруппаПоставщиков.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаПоставщиков;
		КонецЕсли;			
	Иначе	
		ГруппаПокупателей = Справочники.Контрагенты.НайтиПоКоду(Параметры.КодГруппыПокупателей);
		Если Не ГруппаПокупателей.Пустая() И ГруппаПокупателей.ЭтоГруппа Тогда
			Объект.Родитель = ГруппаПокупателей;
		КонецЕсли;				
	КонецЕсли;
	Объект.Комментарий = СтрЗаменить(Объект.Комментарий, "#Поставщик#", "");
	Объект.Комментарий = СтрЗаменить(Объект.Комментарий, "#Покупатель#", "");  	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска  = 1 Тогда
	ИНН = СвойстваПоиска.Получить("ИНН");
	Если ЗначениеЗаполнено(ИНН) Тогда
		СтрокаИменСвойствПоиска = "ИНН"; 
	Иначе
		СтрокаИменСвойствПоиска = "Наименование"; 
	КонецЕсли;	
	//СсылкаНаОбъект = Неопределено;
	//ПрекратитьПоиск  = Истина;	
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>3</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>КонтрагентыПоКоду                                 </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидКонтрагента = Перечисления.ВидыКонтрагентов.Поставщик Тогда
	Значение = Параметры.КодГруппыПоставщиков;
Иначе	
	Значение = Параметры.КодГруппыПокупателей;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>ТекстКомментария = ?(Источник.ВидКонтрагента = Перечисления.ВидыКонтрагентов.Поставщик, "Поставщик", "Покупатель");
Значение = Источник.Комментарий + "#" + ТекстКомментария + "#";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>--&gt; ГоловнойКонтрагент</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ГоловнойКонтрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>--&gt; ЮрФизЛицо</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<ПередВыгрузкой>ИНН = Источник.ИНН;
ДлинаИНН = СтрДлина(СокрЛП(ИНН));
Если ДлинаИНН = 10 ИЛИ ДлинаИНН = 0 Тогда
	Значение = "ЮрЛицо";
Иначе	
	Значение = "ФизЛицо";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>350</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>БанковскиеСчета</Код>
				<Наименование>Справочник: Банковские счета</Наименование>
				<Порядок>400</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.БанковскиеСчета</Источник>
				<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Банк --&gt; Банк</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВидСчета --&gt; ВидСчета</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
						<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Организации") Тогда
	ИмяПКО = "Организации";
Иначе	
	ИмяПКО = "Контрагенты";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДатаЗакрытия --&gt; ДатаЗакрытия</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДатаОткрытия --&gt; ДатаОткрытия</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>МесяцПрописью --&gt; МесяцПрописью</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>НомерИДатаРазрешения --&gt; НомерИДатаРазрешения</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>12</Код>
						<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>СуммаБезКопеек --&gt; СуммаБезКопеек</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Банки</Код>
				<Наименование>Справочник: Банки</Наименование>
				<Порядок>450</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Источник>СправочникСсылка.Банки</Источник>
				<Приемник>СправочникСсылка.Банки</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Город --&gt; Город</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Телефоны --&gt; Телефоны</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КонтрагентыПоКоду</Код>
				<Наименование>:</Наименование>
				<Порядок>500</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатураПоКоду</Код>
				<Наименование>:</Наименование>
				<Порядок>550</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Автоработы</Код>
				<Наименование>Справочник: Автоработы</Наименование>
				<Порядок>600</Порядок>
				<ПослеЗагрузки>ГруппаНоменклатуры = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУслуг);
Если ГруппаНоменклатуры.ЭтоГруппа Тогда
	Объект.Родитель = ГруппаНоменклатуры;
Иначе	
	Объект.Родитель = Справочники.Номенклатура.ПустаяСсылка();
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>
Артикул = СвойстваПоиска.Получить("Артикул");
Если НомерВариантаПоиска  = 1 Тогда
	РодительСсылка = Справочники.Номенклатура.НайтиПоКоду(Параметры.КодГруппыУслуг);
	СсылкаНаОбъект = Справочники.Номенклатура.НайтиПоРеквизиту("Артикул", Артикул, РодительСсылка);
	Если СсылкаНаОбъект.Пустая() Тогда
		СсылкаНаОбъект = Неопределено;
	КонецЕсли;
	ПрекратитьПоиск = Истина;
КонецЕсли;</ПоследовательностьПолейПоиска>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Автоработы</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если ПустаяСтрока(Источник.НаименованиеПолное) Тогда
	Значение = Источник.Наименование;
Иначе
	Значение = Источник.НаименованиеПолное;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Код --&gt; Артикул</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>7</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; Услуга</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>9</Код>
						<Наименование>--&gt; Родитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>НоменклатураПоКоду                                </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Параметры.КодГруппыУслуг</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>--&gt; БазоваяЕдиницаИзмерения</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмеренияПоНаменованию         </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = "шт."</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>--&gt; СтавкаНДС</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<ПередВыгрузкой>Значение = "БезНДС";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмеренияПоНаменованию</Код>
				<Наименование>:</Наименование>
				<Порядок>650</Порядок>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатураУслуги</Код>
				<Наименование>:</Наименование>
				<Порядок>700</Порядок>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Параметры.КодГруппыУслуг;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификатСтранМира</Код>
				<Наименование>Справочник: КлассификаторСтранМира</Наименование>
				<Порядок>750</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>Документ: Поступление товаров</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Отказ = Источник.амбООО;</ПередВыгрузкой>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(Объект, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Покупка");
Объект.ДоговорКонтрагента = Объект.Контрагент.ОсновнойДоговорКонтрагента;
СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Объект.Организация, Объект.Контрагент, Объект.ДоговорКонтрагента);
Объект.СчетУчетаРасчетовСКонтрагентом = СчетаУчета.СчетРасчетов;
Объект.СчетУчетаРасчетовПоАвансам     = СчетаУчета.СчетАвансов;
Объект.СчетУчетаРасчетовПоТаре        = СчетаУчета.СчетУчетаТары;
Для каждого СтрокаТоваров Из Объект.Товары Цикл
	ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Объект);
	ОбработкаТабличныхЧастей.ЗаполнитьНомерГТДИСтрануПроисхождения(СтрокаТоваров);
	Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧастиРегл(СтрокаТоваров, "Товары", Истина, Истина); 
КонецЦикла;</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.ПоступлениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции .ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Коэффициент --&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="СправочникСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВалютаДокумента --&gt; ВалютаДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = "Z" + Источник.Номер;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>10</Код>
						<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; КурсВзаиморасчетов</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>--&gt; НДСВключенВСтоимость</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НДСВключенВСтоимость" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>--&gt; СуммаВключаетНДС</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>--&gt; УчитыватьНДС</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>--&gt; СпособЗачетаАвансов</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
						<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>ХозОперация --&gt; ВидОперации</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="ХозОперация" Вид="Реквизит" Тип="СправочникСсылка.ХозОперации"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
						<КодПравилаКонвертации>ВидыОперацийПоступлениеТоваровУслуг               </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СчетНаОплатуПокупателю</Код>
				<Наименование>Документ: Счет на оплату</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>Если НЕ ЭтотОбъект.Метаданные().Реквизиты.Найти("амбООО") = Неопределено Тогда
	Отказ=Источник.ДокументОснование.амбООО;
КонецЕсли;</ПередВыгрузкой>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>Объект.Склад = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнойСклад");</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.СчетНаОплату</Источник>
				<Приемник>ДокументСсылка.СчетНаОплатуПокупателю</Приемник>
				<Свойства>
					<Группа>
						<Код>10</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>ТаблицаТоваров = Источник.Товары.Выгрузить();
УдалямыеСтроки = Новый Массив;
Для каждого СтрокаДокумента Из ТаблицаТоваров Цикл	
	Если ТипЗнч(СтрокаДокумента.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
		УдалямыеСтроки.Добавить(СтрокаДокумента);
	Иначе
		Если СтрокаДокумента.Номенклатура.ВидНоменклатуры =  Перечисления.ВидыНоменклатуры.Услуга Тогда
			УдалямыеСтроки.Добавить(СтрокаДокумента);
		КонецЕсли;	
	КонецЕсли;	
	СтрокаДокумента.Сумма = СтрокаДокумента.СуммаВсего;
	Если СтрокаДокумента.Количество &gt; 0 Тогда
		СтрокаДокумента.Цена = СтрокаДокумента.Сумма / СтрокаДокумента.Количество;
	КонецЕсли;	
	
КонецЦикла;	
Для каждого УдаляемаяСтрока Из УдалямыеСтроки Цикл
	ТаблицаТоваров.Удалить(УдаляемаяСтрока);
КонецЦикла;	
КоллекцияОбъектов = ТаблицаТоваров;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>17</Код>
						<Наименование>--&gt; Услуги</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>ТаблицаУслуг = Источник.Товары.Выгрузить();
УдалямыеСтроки = Новый Массив;
Для каждого СтрокаДокумента Из ТаблицаУслуг Цикл	
	Если ТипЗнч(СтрокаДокумента.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда		
		Если Не СтрокаДокумента.Номенклатура.ВидНоменклатуры =  Перечисления.ВидыНоменклатуры.Услуга Тогда
			УдалямыеСтроки.Добавить(СтрокаДокумента);
		КонецЕсли;	
	КонецЕсли;	
	СтрокаДокумента.Сумма = СтрокаДокумента.СуммаВсего;
	Если СтрокаДокумента.Количество &gt; 0 Тогда
		СтрокаДокумента.Цена = СтрокаДокумента.Сумма / СтрокаДокумента.Количество;
	КонецЕсли;	

КонецЦикла;	
Для каждого УдаляемаяСтрока Из УдалямыеСтроки Цикл
	ТаблицаУслуг.Удалить(УдаляемаяСтрока);
КонецЦикла;	
КоллекцияОбъектов = ТаблицаУслуг;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>20</Код>
							<Наименование>--&gt; Содержание</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВалютаДокумента --&gt; ВалютаДокумента</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = "Z" + Источник.Номер;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>9</Код>
						<Наименование>ТипЦен --&gt; ТипЦен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦен"/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>:</Наименование>
				<Порядок>150</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ОБъект, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");
Если Найти(Объект.Комментарий,"Товары НДС#") = 0 Тогда
	Объект.Склад = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнойСклад");
Иначе
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.кодСкладаКомиссия,Истина);
КонецЕсли;
Для каждого СтрокаТоваров Из Объект.Товары Цикл
  ОбработкаТабличныхЧастей.ЗаполнитьНомерГТДИСтрануПроисхождения(СтрокаТоваров, Ложь, Объект.Организация, Объект.Дата);
  ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Объект);
	Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧасти(СтрокаТоваров, Истина);
КонецЦикла;</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
				<Свойства>
					<Группа>
						<Код>23</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "БезНДС";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОтчетОРозничныхПродажах"/>
						<ПередВыгрузкой>Значение = "ОтчетККМОПродажах";</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; КратностьДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КратностьДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; КурсДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КурсДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = 1</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true">
						<Код>13</Код>
						<Наименование>--&gt; СтатьяДвиженияДенежныхСредств</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтатьяДвиженияДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.СтатьиДвиженияДенежныхСредств"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>--&gt; СуммаВключаетНДС</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; СчетКасса</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СчетКасса" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<ПередВыгрузкой>Значение = "КассаОрганизации";</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>17</Код>
						<Наименование>--&gt; ТипЦен</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипЦен" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>--&gt; УчитыватьНДС</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>19</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>:</Наименование>
				<Порядок>200</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>Объект.ДоговорКонтрагента = Объект.Контрагент.ОсновнойДоговорКонтрагента;
ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ОБъект, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");
Объект.Склад = Справочники.Склады.НайтиПоНаименованию("Цветочная НДС");
Для каждого СтрокаТоваров Из Объект.Товары Цикл
  ОбработкаТабличныхЧастей.ЗаполнитьНомерГТДИСтрануПроисхождения(СтрокаТоваров, Ложь, Объект.Организация, Объект.Дата);
  ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Объект);
    Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧасти(СтрокаТоваров, "Товары", Истина);
КонецЦикла;</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
						<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "НДС18";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>28</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>Значение = "ЦБ002267";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПоступлениеТоваровУслугКомиссия</Код>
				<Наименование>:</Наименование>
				<Порядок>250</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ОБъект, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");
Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.кодСкладаКомиссия);
Сообщить("склад "+Объект.Склад);
Объект.ДоговорКонтрагента = 
     Справочники.ДоговорыКонтрагентов.НайтиПоРеквизиту("ВидДоговора",Перечисления.ВидыДоговоровКонтрагентов.СКомитентом,,Объект.Контрагент);
Для каждого СтрокаТоваров Из Объект.Товары Цикл
  ОбработкаТабличныхЧастей.ЗаполнитьНомерГТДИСтрануПроисхождения(СтрокаТоваров, Ложь, Объект.Организация, Объект.Дата);
  ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Объект);
	//Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧасти(СтрокаТоваров, "Товары", Истина);
КонецЦикла;
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, "Товары", Истина, Истина);
Объект.СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект);</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
						<ПередВыгрузкой>Значение = "ПокупкаКомиссия";</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>Значение = Параметры.кодОООАльфаМобил;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Группа>
						<Код>11</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "НДС20";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>--&gt; СпособЗачетаАвансов</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
						<ПередВыгрузкой>Значение = "НеЗачитывать";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОООПродаетКлиентамТоварИПСчетПокупателю</Код>
				<Наименование>:</Наименование>
				<Порядок>300</Порядок>
				<Приемник>ДокументСсылка.СчетНаОплатуПокупателю</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>--&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>8</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>:</Наименование>
				<Порядок>350</Порядок>
				<ПередЗагрузкой>РежимЗаписи  = "Запись";</ПередЗагрузкой>
				<ПриЗагрузке>РежимЗаписи  = "Запись";</ПриЗагрузке>
				<ПослеЗагрузки>ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(ОБъект, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");
Если Найти(Объект.Комментарий,"Товары НДС#") = 0 Тогда
	Объект.Склад = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнойСклад");
Иначе
	Объект.Склад = Справочники.Склады.НайтиПоКоду(Параметры.кодСкладаКомиссия,Истина);
КонецЕсли;
Объект.Контрагент = Справочники.Контрагенты.НайтиПоНаименованию("физическое лицо");
Объект.ДоговорКонтрагента = Объект.Контрагент.ОсновнойДоговорКонтрагента;
Для каждого СтрокаТоваров Из Объект.Товары Цикл
    Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧастиРегл(СтрокаТоваров, "Товары", Истина);
КонецЦикла;</ПослеЗагрузки>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<ПередВыгрузкой>Значение = Константы.ВалютаРегламентированногоУчетаОрганизаций.Получить();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийВозвратТоваровОтПокупателя"/>
						<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>--&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>8</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Номенклатура") Тогда
	ИмяПКО = "Номенклатура";
ИначеЕсли ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.Автоработы") Тогда	
	ИмяПКО = "Автоработы";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<ПередВыгрузкой>Значение = "БезНДС";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>13</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Справочник: Ставки НДС</Наименование>
				<Порядок>50</Порядок>
				<Источник>СправочникСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОсновнаяСтавкаНДС --&gt; НДС18</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОсновнаяСтавкаНДС</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийПоступлениеТоваровУслуг</Код>
				<Наименование>Справочник: Хоз. операции</Наименование>
				<Порядок>100</Порядок>
				<Источник>СправочникСсылка.ХозОперации</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ПоступлениеТМЦ --&gt;</Наименование>
						<Порядок>50</Порядок>
						<Источник>ПоступлениеТМЦ</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ПоступлениеТоваров --&gt;</Наименование>
						<Порядок>100</Порядок>
						<Источник>ПоступлениеТоваров</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПоступлениеТоваровКомиссия --&gt;</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПоступлениеТоваровКомиссия</Источник>
						<Приемник>ПокупкаКомиссия</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваров</Код>
				<Наименование>Поступление товаров</Наименование>
				<Порядок>50</Порядок>
				<Описание>Поступление -&gt; Поступление - !!нет фильтра по ИП</Описание>
				<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СчетНаОплату</Код>
				<Наименование>Счет на оплату</Наименование>
				<Порядок>100</Порядок>
				<Описание>Продажи по безналу. Счет пок -&gt; Счет Пок</Описание>
				<КодПравилаКонвертации>СчетНаОплатуПокупателю                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СчетНаОплату</ОбъектВыборки>
			</Правило>
			<Правило Отключить="true">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЧекНаОплату</Код>
				<Наименование>Чек на оплату</Наименование>
				<Порядок>200</Порядок>
				<Описание>Наличные продажи собственного товара. ЧекиНаОплату.Ставка &lt;&gt; 18% -&gt; ОтчетОРозничныхПродажах</Описание>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура КАК Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары ИМ"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
//	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
//	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплату)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура КАК Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары УСН"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ИСТИНА
	|	И НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплату)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество,
	|	""Товары ЕНВД"",
	|	ЧекНаОплатуТовары.СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество,
	|	ЧекНаОплатуТовары.Цена,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЧекНаОплатуТовары.Номенклатура.Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	И НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплату)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЗаказНарядРаботы.Работа,
	|	ПРЕДСТАВЛЕНИЕ(ЗаказНарядРаботы.Работа),
	|	ЗаказНарядРаботы.Количество,
	|	""Услуги ЕНВД"",
	|	ЗаказНарядРаботы.СуммаВсего,
	|	(ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего) / ЗаказНарядРаботы.Количество,
	|	ЗаказНарядРаботы.Цена,
	|	ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего,
	|	СУММА(ЗаказНарядРаботы.СуммаВсего / ЗаказНарядРаботы.Количество),
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЗаказНарядРаботы.Работа.Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказНаряд.Работы КАК ЗаказНарядРаботы
	|		ПО ЧекНаОплатуТовары.Ссылка.ДокументОснование = ЗаказНарядРаботы.Ссылка
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	И ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплату)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|СГРУППИРОВАТЬ ПО
	|	ЧекНаОплатуТовары.Ссылка,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ЗаказНарядРаботы.Работа,
	|	ЗаказНарядРаботы.Количество,
	|	ЗаказНарядРаботы.СуммаВсего,
	|	ЗаказНарядРаботы.Цена,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЗаказНарядРаботы.Работа.Артикул,
	|	(ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего) / ЗаказНарядРаботы.Количество,
	|	ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего
	|
	|УПОРЯДОЧИТЬ ПО
	|	ПризнакУСН
	|ИТОГИ
	|	СУММА(Количество),
	|	СУММА(СуммаВсего),
	|	СУММА(СкидкаНаЦену),
	|	СУММА(ЦенаБезСкидки),
	|	СУММА(СуммаСкидки),
	|	СУММА(ЦенаПродажи)
	|ПО
	|	Дата,
	|	Организация,
	|	Категория";
	
	Запрос.УстановитьПараметр("ЭтоУслуга", Перечисления.ВидыНоменклатуры.Услуга);
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	
	ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		ВыборкаОрганизаций = ВыборкаДат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаОрганизаций.Следующий() Цикл
			ВыборкаКатегорий = ВыборкаОрганизаций.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
			Пока ВыборкаКатегорий.Следующий() Цикл
				Категория   = ВыборкаКатегорий.Категория;
				Организация = ВыборкаОрганизаций.Организация;
				Дата        = ВыборкаДат.Дата;
				Комментарий = "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "; " + Организация + "; " + Категория + "#";
				ВходящиеДанные = Новый Структура;
				ВходящиеДанные.Вставить("Дата", Дата);
				ВходящиеДанные.Вставить("Организация", Организация);				
				ВходящиеДанные.Вставить("Комментарий", Комментарий);
				ТаблицаТоваров = Новый ТаблицаЗначений;
				ТаблицаТоваров.Колонки.Добавить("Количество");
				ТаблицаТоваров.Колонки.Добавить("Номенклатура");
				ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
				ТаблицаТоваров.Колонки.Добавить("Сумма");				
				ТаблицаТоваров.Колонки.Добавить("Цена");				
				Выборка = ВыборкаКатегорий.Выбрать();
				Пока Выборка.Следующий() Цикл
					Количество = Выборка.Количество;
					Если Количество &lt;= 0 Тогда
						Продолжить;
					КонецЕсли;	
					НоваяСтрока = ТаблицаТоваров.Добавить();
					НоваяСтрока.Сумма        = Выборка.СуммаВсего;
					НоваяСтрока.Количество   = Количество;
					НоваяСтрока.Цена         = Окр(Выборка.СуммаВсего / Количество, 2);
					НоваяСтрока.Номенклатура = Выборка.Номенклатура;
				КонецЦикла;	
				ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма"));
				ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
				ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ОтчетОРозничныхПродажах");

			КонецЦикла;	
		КонецЦикла;	
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ЧекНаОплатуНДС</Код>
				<Наименование>ЧекНаОплатуНДС</Наименование>
				<Порядок>250</Порядок>
				<Описание>Наличные продажи товаров ООО. ЧекиНаОплату.Ставка = 20% -&gt; ПоступлениеТоваровУслугКомиссия</Описание>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары НДС"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
//	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	 НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплату)
	|   И ЧекНаОплатуТовары.Ссылка.Дата &gt;= ДАТАВРЕМЯ(2018,08,20)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|
	|УПОРЯДОЧИТЬ ПО
	|	ПризнакУСН
	|ИТОГИ
	|	СУММА(Количество),
	|	СУММА(СуммаВсего),
	|	СУММА(СкидкаНаЦену),
	|	СУММА(ЦенаБезСкидки),
	|	СУММА(СуммаСкидки),
	|	СУММА(ЦенаПродажи)
	|ПО
	|	Дата,
	|	Организация,
	|	Категория";
	
	Запрос.УстановитьПараметр("ЭтоУслуга", Перечисления.ВидыНоменклатуры.Услуга);
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	
	ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		ВыборкаОрганизаций = ВыборкаДат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаОрганизаций.Следующий() Цикл
			ВыборкаКатегорий = ВыборкаОрганизаций.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
			Пока ВыборкаКатегорий.Следующий() Цикл
				Категория   = ВыборкаКатегорий.Категория;
				Организация = ВыборкаОрганизаций.Организация;
				Дата        = ВыборкаДат.Дата;             
				// По Категории при загрузке проставляется Склад.
				Комментарий = "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "; " + Организация + "; " + Категория + "#";
				ВходящиеДанные = Новый Структура;
				ВходящиеДанные.Вставить("Дата", Дата);
				ВходящиеДанные.Вставить("Организация", Организация);				
				ВходящиеДанные.Вставить("Комментарий", Комментарий);
				ВходящиеДанные.Вставить("Контрагент",Параметры.кодОООАльфаМобил);
				ТаблицаТоваров = Новый ТаблицаЗначений;
				ТаблицаТоваров.Колонки.Добавить("Количество");
				ТаблицаТоваров.Колонки.Добавить("Номенклатура");
				ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
				ТаблицаТоваров.Колонки.Добавить("Сумма");				
				ТаблицаТоваров.Колонки.Добавить("Цена");				
				Выборка = ВыборкаКатегорий.Выбрать();
				Пока Выборка.Следующий() Цикл
					Количество = Выборка.Количество;
					Если Количество &lt;= 0 Тогда
						Продолжить;
					КонецЕсли;	
					НоваяСтрока = ТаблицаТоваров.Добавить();
					НоваяСтрока.Сумма        = Выборка.СуммаВсего;
					НоваяСтрока.Количество   = Количество;
					НоваяСтрока.Цена         = Окр(Выборка.СуммаВсего / Количество, 2);
					НоваяСтрока.СтавкаНДС = Справочники.СтавкиНДС.ОсновнаяСтавкаНДС;
					НоваяСтрока.Номенклатура = Выборка.Номенклатура;
				КонецЦикла;	
				ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма"));
				ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
				ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ПоступлениеТоваровУслугКомиссия");
				ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ОтчетОРозничныхПродажах");

			КонецЦикла;	
		КонецЦикла;	
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ОООПродаетКлиентамТоварИП</Код>
				<Наименование>ОООПродаетТоварИП</Наименование>
				<Порядок>300</Порядок>
				<Описание>Сделать счет от ИП на ООО на проданный через ООО товар ИП.</Описание>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|НачалоПериода(СчетФактураВыданныйТовары.Ссылка.Дата, ДЕНЬ) Как Дата,
	| СчетФактураВыданныйТовары.Ссылка.Организация,
	| СчетФактураВыданныйТовары.Ссылка.ВалютаДокумента,
	| СчетФактураВыданныйТовары.ГТД,
	| СчетФактураВыданныйТовары.Партия,
	| СчетФактураВыданныйТовары.Номенклатура,
	| СчетФактураВыданныйТовары.Количество,
	| СчетФактураВыданныйТовары.ЕдиницаИзмерения,
	| СчетФактураВыданныйТовары.Цена,
	| СчетФактураВыданныйТовары.Сумма,
	| СчетФактураВыданныйТовары.СтавкаНДС,
	| СчетФактураВыданныйТовары.СуммаНДС,
	| ВЫБОР 
    |         КОГДА ТипЗначения(СчетФактураВыданныйТовары.Партия) = Тип(Документ.ПоступлениеТоваров)
    |             ТОГДА СчетФактураВыданныйТовары.Партия.амбООО
    |         ИНАЧЕ Ложь
    |     КОНЕЦ КАК ООО
	| ИЗ
	| 	Документ.СчетФактураВыданный.Товары КАК СчетФактураВыданныйТовары
	| ГДЕ
	| 	СчетФактураВыданныйТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	| 	И СчетФактураВыданныйТовары.Ссылка.Организация.СистемаНалогоОбложения = ЗНАЧЕНИЕ(Перечисление.СистемыНалогообложения.Общая)
	| 	И СчетФактураВыданныйТовары.Ссылка.Проведен = Истина
	| 	И ТипЗначения(СчетФактураВыданныйТовары.Номенклатура) = Тип(Справочник.Номенклатура)
	| 	
	| 	ИТОГИ ПО
	|        Дата";
	
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	

    ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		Дата        = ВыборкаДат.Дата;
		Комментарий = "# от " + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + " #";
		ВходящиеДанные = Новый Структура;
		ВходящиеДанные.Вставить("Дата", Дата+8*3600);
		ВходящиеДанные.Вставить("Комментарий", Комментарий);
		ВходящиеДанные.Вставить("Контрагент",Параметры.кодОООАльфаМобил);
		ВходящиеДанные.Вставить("Номер", "Z"+Формат(Дата,"ДФ=ггггММдд"));
//		ВходящиеДанные.Вставить("СчетНаОплатуПоставщика", "Z"+Формат(Дата,"ДФ=ггггММдд"));
		ВходящиеДанные.Вставить("Организация", "");				
		ВходящиеДанные.Вставить("ВалютаДокумента","");
		ТаблицаТоваров = Новый ТаблицаЗначений;
		ТаблицаТоваров.Колонки.Добавить("Количество");
		ТаблицаТоваров.Колонки.Добавить("Номенклатура");
		ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
		ТаблицаТоваров.Колонки.Добавить("СуммаНДС");
		ТаблицаТоваров.Колонки.Добавить("Сумма");				
		ТаблицаТоваров.Колонки.Добавить("Цена");				
		ТаблицаТоваров.Колонки.Добавить("НомерГТД");				
		ТаблицаТоваров.Колонки.Добавить("СтранаПроисхождения");				
		счТоваровИП = 0;
		Выборка = ВыборкаДат.Выбрать();
		Пока Выборка.Следующий() Цикл
			ВходящиеДанные.Организация = "001";
			ВходящиеДанные.ВалютаДокумента = Выборка.ВалютаДокумента;
			Если Выборка.ООО Тогда
				Продолжить;
			КонецЕсли;
			счТоваровИП = счТоваровИП + 1;
			НоваяСтрока = ТаблицаТоваров.Добавить();
			//НоваяСтрока.Сумма        = Выборка.Сумма;
			НоваяСтрока.Количество   = Выборка.Количество;
			НоваяСтрока.Цена         = Выборка.Цена - Окр(Выборка.Цена * 0.3,0);
			НоваяСтрока.Сумма        = Выборка.Количество * НоваяСтрока.Цена;
			НоваяСтрока.Номенклатура = Выборка.Номенклатура;
			НоваяСтрока.СуммаНДС = 0;
			НоваяСтрока.СтавкаНДС = Справочники.СтавкиНДС.БезНДС;
			НоваяСтрока.НомерГТД = Выборка.ГТД;
			НоваяСтрока.СтранаПроисхождения = Выборка.ГТД.Страна;
		КонецЦикла;	
		ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма"));
		ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
		Если счТоваровИП &gt; 0 Тогда
			ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ОООПродаетКлиентамТоварИПСчетПокупателю");
		КонецЕсли;
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ЧекНаВозврат</Код>
				<Наименование>ЧекНаВозврат</Наименование>
				<Порядок>350</Порядок>
				<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
				<ПередОбработкойПравила>	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура КАК Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары ИМ"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
//	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ИСТИНА
	|	НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
//	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплатуВозврат)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И ЧекНаОплатуТовары.Ссылка.амбИнтМаг
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура КАК Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары УСН"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ИСТИНА
	|	И НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплатуВозврат)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество,
	|	""Товары ЕНВД"",
	|	ЧекНаОплатуТовары.СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество,
	|	ЧекНаОплатуТовары.Цена,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЧекНаОплатуТовары.Номенклатура.Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	И НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплатуВозврат)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЗаказНарядРаботы.Работа,
	|	ПРЕДСТАВЛЕНИЕ(ЗаказНарядРаботы.Работа),
	|	ЗаказНарядРаботы.Количество,
	|	""Услуги ЕНВД"",
	|	ЗаказНарядРаботы.СуммаВсего,
	|	(ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего) / ЗаказНарядРаботы.Количество,
	|	ЗаказНарядРаботы.Цена,
	|	ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего,
	|	СУММА(ЗаказНарядРаботы.СуммаВсего / ЗаказНарядРаботы.Количество),
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЗаказНарядРаботы.Работа.Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЗаказНаряд.Работы КАК ЗаказНарядРаботы
	|		ПО ЧекНаОплатуТовары.Ссылка.ДокументОснование = ЗаказНарядРаботы.Ссылка
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	И ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И НЕ ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплатуВозврат)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|СГРУППИРОВАТЬ ПО
	|	ЧекНаОплатуТовары.Ссылка,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ЗаказНарядРаботы.Работа,
	|	ЗаказНарядРаботы.Количество,
	|	ЗаказНарядРаботы.СуммаВсего,
	|	ЗаказНарядРаботы.Цена,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ),
	|	ЗаказНарядРаботы.Работа.Артикул,
	|	(ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего) / ЗаказНарядРаботы.Количество,
	|	ЗаказНарядРаботы.Сумма - ЗаказНарядРаботы.СуммаВсего
	|
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЧекНаОплатуТовары.Ссылка.Организация КАК Организация,
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН КАК ПризнакУСН,
	|	ЧекНаОплатуТовары.Ссылка.Сделка,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Ссылка.Сделка),
	|	ЧекНаОплатуТовары.Номенклатура,
	|	ПРЕДСТАВЛЕНИЕ(ЧекНаОплатуТовары.Номенклатура),
	|	ЧекНаОплатуТовары.Количество КАК Количество,
	|	""Товары НДС"" КАК Категория,
	|	ЧекНаОплатуТовары.СуммаВсего КАК СуммаВсего,
	|	(ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего) / ЧекНаОплатуТовары.Количество КАК СкидкаНаЦену,
	|	ЧекНаОплатуТовары.Цена КАК ЦенаБезСкидки,
	|	ЧекНаОплатуТовары.Сумма - ЧекНаОплатуТовары.СуммаВсего КАК СуммаСкидки,
	|	ЧекНаОплатуТовары.СуммаВсего / ЧекНаОплатуТовары.Количество КАК ЦенаПродажи,
	|	НАЧАЛОПЕРИОДА(ЧекНаОплатуТовары.Ссылка.Дата, ДЕНЬ) КАК Дата,
	|	ЧекНаОплатуТовары.Номенклатура.Артикул КАК Артикул,
	|	ЧекНаОплатуТовары.Ссылка
	|ИЗ
	|	Документ.ЧекНаОплату.Товары КАК ЧекНаОплатуТовары
	|ГДЕ
	|	ЧекНаОплатуТовары.Номенклатура.амбУСН = ЛОЖЬ
	|	И НЕ ЧекНаОплатуТовары.Номенклатура.ВидНоменклатуры = &amp;ЭтоУслуга
	|	И ЧекНаОплатуТовары.СтавкаНДС = Значение(Справочник.СтавкиНДС.ОсновнаяСтавкаНДС)
	|	И ЧекНаОплатуТовары.Ссылка.ХозОперация = ЗНАЧЕНИЕ(Справочник.ХозОперации.ЧекНаОплату)
	|   И ЧекНаОплатуТовары.Ссылка.Дата &gt;= ДАТАВРЕМЯ(2018,08,20)
	|	И ЧекНаОплатуТовары.Ссылка.Проведен
	|	И ЧекНаОплатуТовары.Ссылка.Дата МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания
	|	И НЕ ЕСТЬNULL(ЧекНаОплатуТовары.Ссылка.амбИнтМаг, Ложь)
	|УПОРЯДОЧИТЬ ПО
	|	ПризнакУСН
	|ИТОГИ
	|	СУММА(Количество),
	|	СУММА(СуммаВсего),
	|	СУММА(СкидкаНаЦену),
	|	СУММА(ЦенаБезСкидки),
	|	СУММА(СуммаСкидки),
	|	СУММА(ЦенаПродажи)
	|ПО
	|	Дата,
	|	Организация,
	|	Категория";
	
	Запрос.УстановитьПараметр("ЭтоУслуга", Перечисления.ВидыНоменклатуры.Услуга);
	Запрос.УстановитьПараметр("ДатаНачала", НачалоДня(ДатаНачала));
	Запрос.УстановитьПараметр("ДатаОкончания", КонецДня(ДатаОкончания)); 	
	ВыборкаДат = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаДат.Следующий() Цикл
		ВыборкаОрганизаций = ВыборкаДат.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		Пока ВыборкаОрганизаций.Следующий() Цикл
			ВыборкаКатегорий = ВыборкаОрганизаций.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
			Пока ВыборкаКатегорий.Следующий() Цикл
				Категория   = ВыборкаКатегорий.Категория;
				Организация = ВыборкаОрганизаций.Организация;
				Дата        = ВыборкаДат.Дата;
				Комментарий = "#" + Формат(ВыборкаДат.Дата, "ДФ=dd.MM.yyyy") + "; " + Организация + "; " + Категория + "#";
				ВходящиеДанные = Новый Структура;
				ВходящиеДанные.Вставить("Дата", Дата);
				ВходящиеДанные.Вставить("Организация", Организация);				
				ВходящиеДанные.Вставить("Комментарий", Комментарий);
				ТаблицаТоваров = Новый ТаблицаЗначений;
				ТаблицаТоваров.Колонки.Добавить("Количество");
				ТаблицаТоваров.Колонки.Добавить("Номенклатура");
				ТаблицаТоваров.Колонки.Добавить("СтавкаНДС");
				ТаблицаТоваров.Колонки.Добавить("Сумма");				
				ТаблицаТоваров.Колонки.Добавить("Цена");				
				Выборка = ВыборкаКатегорий.Выбрать();
				Пока Выборка.Следующий() Цикл
					Количество = Выборка.Количество;
					Если Количество &lt;= 0 Тогда
						Продолжить;
					КонецЕсли;	
					НоваяСтрока = ТаблицаТоваров.Добавить();
					НоваяСтрока.Сумма        = Выборка.СуммаВсего;
					НоваяСтрока.Количество   = Количество;
					НоваяСтрока.Цена         = Окр(Выборка.СуммаВсего / Количество, 2);
					НоваяСтрока.Номенклатура = Выборка.Номенклатура;
				КонецЦикла;	
				ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТоваров.Итог("Сумма"));
				ВходящиеДанные.Вставить("Товары", ТаблицаТоваров);
				ВыгрузитьПоПравилу(,,ВходящиеДанные,,"ВозвратТоваровОтПокупателя");

			КонецЦикла;	
		КонецЦикла;	
	КонецЦикла;</ПередОбработкойПравила>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы/>
	<Запросы/>
</ПравилаОбмена>